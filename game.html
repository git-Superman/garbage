<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="applicable-device" content="pc,mobile"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<title>垃圾分类小游戏</title>
		<script type="text/javascript" src="js/jquery-1.8.2.min.js" ></script>
		<script type="text/javascript">
			$(function(){
			    var time=30;
			    $("#cooldown").html(time);
			    var t=setInterval(function(){
			        $("#cooldown").html(time);
			        time--;
			        if(time==-1){			            
			            clearInterval(t); //清除定时器  停留在当前页			            
			        }
			    },1000);
			});
		</script>
		<script type="text/javascript" src="js/inobounce.js" ></script>
	</head>
	<body>
		<div class="bg_b"><img src="img/bg_game.png" width="100%" height="100%"></div>
		<div class="wrap_con">
			<div class="con_idx">
				<div class="top_idx">
					<div class="score_idx">
						<img src="img/bg_score.png">
						<p class="score_t">0</p>
					</div>
					<!--生命值-->
					<div class="life_game">
						<ul>
							<li class="icon_life icon_life1"></li>
							<li class="icon_life icon_life1"></li>
							<li class="icon_life icon_life1"></li>
							<li class="icon_life icon_life1"></li>
							<li class="icon_life icon_life2"></li>
						</ul>
					</div>
					<div class="bgm_idx">								
						<div id="play_btn">
							<button type="button" class="icon_bgm"></button>
							<audio src="img/bg.mp3" loop preload></audio>
						</div>
					</div>
				</div>
				<div class="top_r_idx">
					<div class="icon_rule" id="btn_rule">
					</div>
				</div>
				
				<!--倒计时-->
				<div class="time_game">
					<p id="cooldown">30</p>
				</div>
				<!--移动的云-->
				<div class="clouds">
					<div class="cloud cloud1"><img src="img/cloud.png"></div>
					<div class="cloud cloud2"><img src="img/cloud.png"></div>
					<div class="cloud cloud3"><img src="img/cloud.png"></div>
				</div>
				<!--垃圾名称-->
				<div class="txt_game">
					<div class="txt_rubbish">
						<p>大骨头</p>
					</div>
				</div>
				<!--垃圾桶-->
				<div class="con_ashcan">
					<ul class="ashcan_list">
						<li>
							<a href="javascript:;" class="ashcan ashcan_1"></a>
						</li>
						<li>
							<a href="javascript:;" class="ashcan ashcan_2"></a>
						</li>
						<li>
							<a href="javascript:;" class="ashcan ashcan_3"></a>
						</li>
						<li>
							<a href="javascript:;" class="ashcan ashcan_4"></a>
						</li>
					</ul>
				</div>
			</div> 
		</div> 
		<!--规则弹出 start-->
		<div class="pop_rule">
			<div class="mask mask1"></div>
			<div id="rule_close"><img src="img/btn_close.png"></div>
			<div id="tab">
				<ul class="tab_menu">
			    	<li class="selected">游戏规则</li>
			        <li>垃圾分类规则</li>
			    </ul>
			    <div class="tab_box">
			    	<div class="txt_popR">
			    		<p>1、垃圾投放正确一次得10个金币</p>
			    		<p>2、垃圾投放正确一次扣除10个金币</p>
			    	</div>
			        <div class="txt_popR hide">
			        	<p>首先，要理顺垃圾分类工作的环节及相互关系，做到分工细致、流程简化、条理缜密、管理有序</p>
			        	<p>其次，要把垃圾分类纳入社区自治内容，明确主体职责，充分调动公众和管理者的主动性和积极性。</p>
			        	<p>第三，应坚持先易后难，循序渐进原则，制定切实可行的垃圾分类实施方案和执法监督计划。</p>
			        	<p>第四，通过强化垃圾的物质利用促进垃圾分类。</p>
			        	<p>第五，合理利用经济激励手段，树立垃圾排放成本意识。</p>
			        	<p>最后，应加强垃圾分类及分类处理监管。</p>
			        </div>
			    </div>
			</div>			
		</div>
		
		<!--得分 start-->
		<div class="pop_score">
			<div class="mask mask2"></div>
			<div class="content_pS">
				<div id="score_close"><img src="img/btn_close.png"></div>			
				<div class="con_score">
					<p class="score_p1">您的成绩为：<span>1080</span>分</p>
					<p class="score_p2">成功击败全国95%的玩家</p><br>
					<p class="score_p2">最佳成绩为：1080分</p>
					<p class="score_p2">最佳排名为：NO.220</p>
				</div>
				<div class="btns_popS">
					<ul>
						<li>
							<a href="javascript:;" id="restart" class="btn_pS btn_pS1">再来一局</a>
						</li>
						<li>
							<a href="javascript:;" id="ranking" class="btn_pS btn_pS2">排行榜</a>
						</li>
						<li>
							<a href="javascript:;" id="share" class="btn_pS btn_pS3">分享</a>
						</li>
					</ul>
				</div>
			</div>
			
			<!--排行榜-->
			<div class="con_ranking">
				<a href="javascript:;" id="btn_back"></a>
				<div class="title_ranking">
					<div class="avatar_rt"><img src="img/avatar.png"></div>
					<div class="txt_rt">
						<p>我的排名第 20 名</p>
						<p>得分 880 分</p>
					</div>
				</div>
				<div class="list_rk">
					<div class="title_txt">
						<p>排名</p>
						<p>头像</p>
						<p>昵称</p>
						<p>得分</p>
					</div>
					<dl>						
						<dd>
							<span class="item_rp"><img src="img/ranking1.png"></span>
							<span class="item_ap"><img src="img/avatar1.png"></span>
							<p>哪吒</p>
							<p>5660</p>
						</dd>
						<dd>
							<span class="item_rp"><img src="img/ranking2.png"></span>
							<span class="item_ap"><img src="img/avatar2.png"></span>
							<p>哪吒</p>
							<p>5260</p>
						</dd>
						<dd>
							<span class="item_rp"><img src="img/ranking3.png"></span>
							<span class="item_ap"><img src="img/avatar3.png"></span>
							<p>哪吒</p>
							<p>4860</p>
						</dd>
						<dd>
							<span class="item_rp">4</span>
							<span class="item_ap"><img src="img/avatar1.png"></span>
							<p>哪吒</p>
							<p>3570</p>
						</dd>
						<dd>
							<span class="item_rp">5</span>
							<span class="item_ap"><img src="img/avatar2.png"></span>
							<p>哪吒</p>
							<p>3180</p>
						</dd>
						<dd>
							<span class="item_rp">6</span>
							<span class="item_ap"><img src="img/avatar3.png"></span>
							<p>哪吒</p>
							<p>2570</p>
						</dd>
						<dd>
							<span class="item_rp">7</span>
							<span class="item_ap"><img src="img/avatar1.png"></span>
							<p>哪吒</p>
							<p>3570</p>
						</dd>
						<dd>
							<span class="item_rp">8</span>
							<span class="item_ap"><img src="img/avatar2.png"></span>
							<p>哪吒</p>
							<p>3180</p>
						</dd>
						<dd>
							<span class="item_rp">9</span>
							<span class="item_ap"><img src="img/avatar3.png"></span>
							<p>哪吒</p>
							<p>2570</p>
						</dd>
						<dd>
							<span class="item_rp">10</span>
							<span class="item_ap"><img src="img/avatar1.png"></span>
							<p>哪吒</p>
							<p>2570</p>
						</dd>
					</dl>
				</div>
			</div>
			
			<!--分享-->
			<div class="con_share">
				<div class="icon_share"><img src="img/icon_share.png"></div>
				<p>点击右上角分享哦~</p>
			</div>
		</div>
		<script type="text/javascript">
			$(document).ready(function(){
				$('#btn_rule').click(function(){
					$('.mask1').show();
					$('.pop_rule').show();	
				});
				$('#rule_close').click(function(){
					$('.pop_rule').hide();
					$('.mask1').hide();
				});
				
				$('.ashcan_1').click(function(){
					$('.mask2').show();
					$('.pop_score').show();	
				});
				$('#score_close').click(function(){
					$('.pop_score').hide();
					$('.mask2').hide();
				});
				$('#restart').click(function(){
					window.location.reload();
				});
				$('#ranking').click(function(){
					$('.content_pS').hide();
					$('.con_ranking').show();
				});
				$('#btn_back').click(function(){
					$('.con_ranking').hide();
					$('.content_pS').show();
				});
				$('#share').click(function(){
					$('.content_pS').hide();
					$('.con_share').show();
				});
				$('.con_share').click(function(){
					$('.con_share').hide();
					$('.pop_score .mask2').hide();
				});
				$('.ashcan_1').click(function(){
					$('.mask2').show();
					$('.content_pS').show();	
				});
			});
		</script>
		<script type="text/javascript">
			$(document).ready(function(){
				var $tab_li = $('#tab ul li');
				$tab_li.hover(function(){
					$(this).addClass('selected').siblings().removeClass('selected');
					var index = $tab_li.index(this);
					$('div.tab_box > div').eq(index).show().siblings().hide();
				});	
			});
		</script>
		<!--规则弹出 end-->
		
		
		<!--音乐播放暂停 -->	
	    <script>
		    /* touchstart,DOMContentLoaded无法在jQuery.ready里执行监听操作 */
		    function autoPlay() {
		        /* 自动播放音乐效果，解决浏览器或者APP自动播放问题 */
		        function musicInBrowserHandler() {
		            audioToggle(true);
		            document.body.removeEventListener('touchstart', musicInBrowserHandler);
		        }
		        document.body.addEventListener('touchstart', musicInBrowserHandler);
		
		        /* 自动播放音乐效果，解决微信自动播放问题 */
		        function musicInWeixinHandler() {
		            audioToggle(true);
		            document.addEventListener('WeixinJSBridgeReady', function() {
		                audioToggle(true);
		            }, false);
		            document.addEventListener('YixinJSBridgeReady', function() {
		                audioToggle(true);
		            }, false);
		            document.removeEventListener('DOMContentLoaded', musicInWeixinHandler);
		        }
		        document.addEventListener('DOMContentLoaded', musicInWeixinHandler);
		    }
		    autoPlay();
		
		    // ====================================================
		
		    function audioToggle(isPlay) {
		        var playBtn = document.getElementById('play_btn');
		        var audio = playBtn.getElementsByTagName('audio')[0];
		
		        if (typeof(isPlay) == 'undefined') {
		            isPlay = !!audio.paused;
		        }
		
		        var space = String.fromCharCode(32); // 空格
		        var playBtnClass = space + (playBtn.getAttribute('class') || (isPlay ? 'play' : 'pause')) + space;
		        if (isPlay) {
		            playBtnClass = playBtnClass.replace(space + 'pause' + space, space + 'play' + space);
		            audio.play();
		        } else {
		            playBtnClass = playBtnClass.replace(space + 'play' + space, space + 'pause' + space);
		            audio.pause();
		        }
		        playBtn.className = playBtnClass.replace(/(^\s*)|(\s*$)/g, '');
		    }
		
		    document.getElementById('play_btn').onclick = function() {
		        audioToggle();
		    }
	    </script>
    
    	
	</body>
</html>
